<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        :root { --dark-blue: #12193b; --row-bg: #1a2245; --logo-name-bg: #242f66; --cyan: #00f2ff; --text-color: #ffffff; --row-h: 38px; --logo-size: 30px; --name-width: 120px; }
        body { font-family: 'Oswald', sans-serif; background: #00FF00; color: white; overflow: hidden; }
        #board { position: absolute; left: 20px; bottom: 20px; background: var(--dark-blue); padding: 10px; border-radius: 8px; }
        .header-row { display: flex; font-size: 11px; color: var(--cyan); border-bottom: 1px solid rgba(0,242,255,0.3); margin-bottom: 5px; }
        .team-row { display: flex; align-items: center; height: var(--row-h); background: var(--row-bg); margin-bottom: 2px; }
        .logo-name-section { display: flex; align-items: center; background: var(--logo-name-bg); height: 100%; }
        .bar { width: 4px; height: 18px; margin: 0 1px; }
        .total-val { background: var(--cyan); color: #000; font-weight: bold; width: 55px; text-align: center; height: 100%; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>
    <div id="board"></div>

    <script>
        const LIVE_URL = "https://bgmi-overlay-default-rtdb.firebaseio.com/liveData.json";
        
        async function updateDisplay() {
            const res = await fetch(LIVE_URL);
            const data = await res.json();
            if (!data) return;

            const { teams, config } = data;
            // Update CSS Variables from Firebase Config
            Object.entries(config).forEach(([p, v]) => {
                document.documentElement.style.setProperty('--' + p, v + (isNaN(v) || v.startsWith('#') ? '' : 'px'));
            });

            const sortedTeams = [...teams].sort((a, b) => (parseInt(b.fin)+parseInt(b.place)) - (parseInt(a.fin)+parseInt(a.place)));
            
            let html = `<div class="header-row"><div style="width:30px">#</div><div style="width:160px">TEAM</div><div style="width:50px">ALIVE</div><div style="width:40px">FIN</div><div style="width:55px">TOTAL</div></div>`;
            
            sortedTeams.forEach((t, i) => {
                const total = parseInt(t.fin) + parseInt(t.place);
                html += `<div class="team-row">
                    <div class="logo-name-section">
                        <div style="width:30px;text-align:center">${i+1}</div>
                        <div style="width:var(--logo-size)"><img src="${t.logo}" style="width:100%" onerror="this.style.opacity='0'"></div>
                        <div style="width:var(--name-width);padding-left:10px">${t.name}</div>
                    </div>
                    <div style="width:50px;display:flex;justify-content:center">${t.alive.map(a => `<div class="bar" style="background:${a?'white':'#445588'};opacity:${a?1:0.3}"></div>`).join('')}</div>
                    <div style="width:40px;text-align:center">${t.fin}</div>
                    <div class="total-val">${total}</div>
                </div>`;
            });
            document.getElementById('board').innerHTML = html;
        }

        setInterval(updateDisplay, 2000); // Har 2 sec mein update
        updateDisplay();
    </script>
</body>
</html>
