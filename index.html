<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sanjay Pro All-In-One</title>
    <style>
        :root { --orange:#ff5a00; --blue:#0088ff; --green:#2ecc71; --red:#dc3545; --dark:#111; }
        body { margin:0; font-family:'Oswald', sans-serif; background:#050505; color:#fff; }
        
        /* 1. ADMIN GRID SECTION */
        #admin-panel { padding: 20px; border-bottom: 4px solid var(--orange); }
        .grid-container { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 20px; }
        .grid-item { 
            background: #1a1a1a; border: 2px solid #333; border-radius: 8px; padding: 15px 5px; 
            text-align: center; cursor: pointer; transition: 0.2s; position: relative;
        }
        .grid-item:hover { border-color: var(--orange); }
        .grid-item.active-slot { border-color: var(--green); box-shadow: 0 0 10px var(--green); }
        .grid-item h2 { margin: 0; font-size: 30px; }
        .grid-item p { margin: 5px 0; font-size: 12px; color: #aaa; text-transform: uppercase; }
        
        /* Stats Input Overlay inside Grid */
        .stats-overlay { display: flex; justify-content: center; gap: 10px; font-size: 11px; color: var(--green); }

        /* 2. LIVE VIEW SECTION (OBS ke liye) */
        #live-view-container { background: #333; padding: 20px; text-align: center; }
        #live-view { 
            width: 1920px; height: 1080px; background: #00ff00; /* Chroma Key Green */
            position: relative; margin: 0 auto; transform: scale(0.4); transform-origin: top center;
        }
        
        /* AX Overlay Components */
        .overlay-box { position: absolute; bottom: 100px; left: 100px; display: flex; align-items: center; opacity: 0; transition: 0.5s; }
        .o-logo { width: 140px; height: 140px; background: var(--green); border: 5px solid #fff; display: flex; align-items: center; justify-content: center; font-size: 70px; z-index: 2; }
        .o-name { background: rgba(0,0,0,0.95); height: 100px; min-width: 450px; margin-left: -60px; padding: 0 50px 0 90px; border: 4px solid #fff; clip-path: polygon(0 0, 93% 0, 100% 100%, 0 100%); display: flex; align-items: center; font-size: 50px; font-weight: bold; }
        .o-metrics { position: absolute; top: 115%; left: 60px; background: var(--orange); padding: 5px 20px; font-size: 28px; border: 2px solid #fff; display: flex; gap: 20px; }

        /* Settings Area */
        .settings-panel { display: flex; gap: 15px; background: #111; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        input { background: #000; color: #fff; border: 1px solid #444; padding: 6px; border-radius: 4px; font-size: 12px; }
        .btn { padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; text-transform: uppercase; }
    </style>
</head>
<body>

<div id="admin-panel">
    <div class="header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
        <h2 style="color:var(--orange); margin:0;">SANJAY ALL-IN-ONE PRODUCTION</h2>
        <div id="sync-status" style="color:var(--green); font-size:12px;">SYSTEM LIVE</div>
    </div>

    <div class="settings-panel">
        <input type="text" id="mNum" value="MATCH 01" placeholder="Match No." onchange="saveMeta()">
        <input type="text" id="mMap" value="ERANGEL" placeholder="Map" onchange="saveMeta()">
        <button class="btn" style="background:var(--blue)" onclick="toggleSettings()">EDIT TEAMS / LOGOS</button>
        <button class="btn" style="background:gold; color:#000;" onclick="triggerCard('WWCD')">WWCD CARD</button>
    </div>

    <div class="grid-container" id="controlGrid"></div>

    <div id="teamEditor" style="display:none; background:#111; padding:20px; border-radius:8px;">
        <h3 style="color:var(--orange)">TEAM DATABASE (LOGO & STATS)</h3>
        <div id="editList" style="display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;"></div>
    </div>
</div>

<div id="live-view-container">
    <h3 style="color:var(--green)">OBS PREVIEW (CROP GREEN AREA)</h3>
    <div id="live-view">
        <div class="overlay-box" id="ui-main">
            <div class="o-logo" id="o-color"><span id="o-slot">--</span></div>
            <div class="o-name"><span id="o-team-name">WAITING</span></div>
            <div class="o-metrics">
                <span>FINISHES: <b id="o-fin">0</b></span>
                <span>ALIVE: <b id="o-alive">4</b></span>
            </div>
        </div>
    </div>
</div>

<script>
    const fixedColors = { 1: '#10449e', 2: '#1b5e20', 3: '#c62828', 4: '#e65100', 5: '#6a1b9a', 6: '#2ecc71', 7: '#ad1457', 8: '#00796b', 9: '#795548', 10: '#303f9f', 11: '#fbc02d', 12: '#1565c0', 13: '#388e3c', 14: '#ff8f00', 15: '#d81b60', 16: '#7b1fa2', 17: '#00897b', 18: '#9e9e9e', 19: '#558b2f', 20: '#5d4037', 21: '#0277bd', 22: '#616161', 23: '#ff5722', 24: '#7cb342', 25: '#263238' };
    
    let teamDB = JSON.parse(localStorage.getItem('s_all_db')) || {};

    function init() {
        const grid = document.getElementById('controlGrid');
        const editList = document.getElementById('editList');
        grid.innerHTML = ""; editList.innerHTML = "";

        for(let i=1; i<=25; i++) {
            if(!teamDB[i]) teamDB[i] = { name: `TEAM ${i}`, logo: `${i}`, fin: 0, alive: 4 };
            const t = teamDB[i];

            // 1. Grid Controller
            grid.innerHTML += `
                <div class="grid-item" id="slot-${i}" onclick="updateLive(${i})" style="border-bottom: 4px solid ${fixedColors[i]}">
                    <h2>${i}</h2>
                    <p>${t.name}</p>
                    <div class="stats-overlay">F:${t.fin} | A:${t.alive}</div>
                </div>`;

            // 2. Editor Fields
            editList.innerHTML += `
                <div style="border:1px solid #333; padding:10px;">
                    <b>SLOT ${i}</b><br>
                    NAME: <input type="text" value="${t.name}" onchange="save(${i},'name',this.value)" style="width:100px;"><br>
                    FIN: <input type="number" value="${t.fin}" onchange="save(${i},'fin',this.value)" style="width:40px;">
                    ALIVE: <input type="number" value="${t.alive}" onchange="save(${i},'alive',this.value)" style="width:40px;">
                </div>`;
        }
    }

    function save(i, k, v) { teamDB[i][k] = v; localStorage.setItem('s_all_db', JSON.stringify(teamDB)); init(); }

    function updateLive(i) {
        const t = teamDB[i];
        document.getElementById('ui-main').style.opacity = 1;
        document.getElementById('o-slot').innerText = i;
        document.getElementById('o-team-name').innerText = t.name;
        document.getElementById('o-color').style.background = fixedColors[i];
        document.getElementById('o-fin').innerText = t.fin;
        document.getElementById('o-alive').innerText = t.alive;
        
        document.querySelectorAll('.grid-item').forEach(el => el.classList.remove('active-slot'));
        document.getElementById(`slot-${i}`).classList.add('active-slot');
    }

    function toggleSettings() {
        const el = document.getElementById('teamEditor');
        el.style.display = (el.style.display === 'none') ? 'block' : 'none';
    }

    init();
</script>
</body>
</html>
